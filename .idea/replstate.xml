<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ReplState" timestamp="1411658191955">{:repl-history {:ide [], :local [&quot;(use 'guestbook.repl)&quot; &quot;(start-server)&quot; &quot;(use 'guestbook.routes.home)&quot; &quot;(home)&quot; &quot;(defn create-guestbook-table\n  []\n  (sql/with-db-connection [database db]\n    (sql/create-table-ddl\n      :guestbook\n      [:id \&quot;INTEGER PRIMARY KEY AUTOINCREMENT\&quot;]\n      [:timestamp \&quot;TIMESTAMP DEFAULT CURRENT_TIMESTAMP\&quot;]\n      [:name \&quot;TEXT\&quot;]\n      [:message \&quot;TEXT\&quot;])\n    (sql/db-do-commands database\n                        \&quot;CREATE INDEX timestamp_index ON guestbook (timestamp)\&quot;)))&quot; &quot;(use 'guestbook.models.db)&quot; &quot;(create-guestbook-table)&quot; &quot;(def db {:classname \&quot;com.mysql.jdbc.Driver\&quot;\n         :subprotocol \&quot;mysql\&quot;\n         :subname \&quot;//localhost:3306/sq3\&quot;\n         :user \&quot;root\&quot;\n         :password \&quot;othniel\&quot;})&quot; &quot;(defn read-guests\n  []\n  (sql/with-db-connection [db-spec db]\n     (let [conn (sql/get-connection db-spec)]\n       (j/query conn\n                \&quot;select * from guestbook order by timestamp desc\&quot;\n                :result-set-fn\n                doall))))&quot; &quot;(defn read-guests\n  []\n  (sql/with-db-connection [db-spec db]\n     (let [conn (sql/get-connection db-spec)]\n       (sql/query conn\n                \&quot;select * from guestbook order by timestamp desc\&quot;\n                :result-set-fn\n                doall))))&quot; &quot;(defn save-message\n  [name message]\n  (sql/with-db-connection [db-spec db]\n      (sql/insert! db-spec :guestbook\n                   {:name name\n                    :message message\n                    :timestamp (Date.)})))&quot; &quot;(save-message \&quot;Bob\&quot; \&quot;hello\&quot;)&quot; &quot;(defn read-guests\n  []\n  (sql/with-db-connection\n    [db-spec db]\n    (sql/query db-sped\n               \&quot;select * from guestbook order by timestamp desc\&quot;\n               :result-set-fn\n               doall)))&quot; &quot;(defn read-guests\n  []\n  (sql/with-db-connection\n    [db-spec db]\n    (sql/query db-spec\n               \&quot;select * from guestbook order by timestamp desc\&quot;\n               :result-set-fn\n               doall)))&quot; &quot;(read-guests)&quot; &quot;(ns guestbook.routes.home\n  (:import (java.text SimpleDateFormat))\n  (:require [compojure.core :refer :all]\n            [guestbook.views.layout :as layout]\n            [hiccup.form :refer :all]\n            [guestbook.models.db :as db]))&quot; &quot;(defn format-time\n  [time-stamp]\n  (-&gt; \&quot;dd/MM/yyyy\&quot;\n      (SimpleDateFormat.)\n      (.format timestamp)))&quot; &quot;(defn format-time\n  [time-stamp]\n  (-&gt; \&quot;dd/MM/yyyy\&quot;\n      (SimpleDateFormat.)\n      (.format time-stamp)))&quot; &quot;(defn show-guests\n  []\n  [:ul.guests\n   (for [{:keys [message name timestamp]} (db/read-guests)]\n     [:li\n      [:blockquote message]\n      [:p \&quot;-\&quot; [:cite name]]\n      [:time (format-time timestamp)]])])&quot; &quot;(with-db-connection [ds db]\n  (sql/query ds\n             \&quot;select * from aututu\&quot;\n             :result-set-fn\n             doall))&quot; &quot;(ns guestbook.models.db\n  (:require [clojure.java.jdbc :as sql])\n  (:import java.sql.DriverManager\n           (java.util Date)))&quot; &quot;(sql/with-db-connection [ds db]\n  (sql/query ds\n             \&quot;select * from aututu\&quot;\n             :result-set-fn\n             doall))&quot; &quot;(defn table-exists?\n  []\n  (sql/with-db-connection [db-con db]\n    (let [meta (.getMetaData db-con)\n          tables (.getTables meta nil nil nil (to-array [\&quot;guestbook\&quot;]))]\n      tables)))&quot; &quot;(sql/get-connection db)&quot; &quot;(.getMetaData (sql/get-connection db))&quot; &quot;(sql/with-db-connection [db-con db]\n   (.getMetaData db-con))&quot; &quot;(add-connection db (sql/get-connection db))&quot; &quot;(sql/add-connection db (sql/get-connection db))&quot; &quot;(.close (sql/add-connection db (sql/get-connection db)))&quot; &quot;(.do (sql/get-connection db))&quot; &quot;(.close (sql/get-connection db))&quot; &quot;(defn table-exists?\n  []\n  (with-open [db-con (sql/get-connection db)]\n    (let [meta (.getMetaData db-con)\n          tables (.getTables meta nil nil nil (to-array [\&quot;guestbook\&quot;]))]\n      tables)))&quot; &quot;(to-array [1 2 3])&quot; &quot;(to-array [\&quot;hello\&quot;])&quot; &quot;(bean (.getMetaData (sql/get-connection db)))&quot; &quot;(read-string (bean (.getMetaData (sql/get-connection db))))&quot; &quot;(keys (bean (.getMetaData (sql/get-connection db))))&quot; &quot;(:connection (bean (.getMetaData (sql/get-connection db))))&quot; &quot;(.getTables (.getMetaData (sql/get-connection db)) nil nil nil (to-array [\&quot;TABLE\&quot;]))&quot; &quot;(+ \&quot;2\&quot;)&quot; &quot;(class (to-array [\&quot;TABLE\&quot;]))&quot; &quot;(class (to-array [1]))&quot; &quot;(class (to-array \&quot;13\&quot;))&quot; &quot;(class (to-array (list \&quot;ab\&quot;)))&quot; &quot;(class (to-array \&quot;a\&quot; \&quot;b\&quot;))&quot; &quot;(class (into-array [\&quot;a\&quot; \&quot;b\&quot;]))&quot; &quot;(defn table-exists?\n  []\n  (with-open [db-con (sql/get-connection db)]\n    (let [meta (.getMetaData db-con)\n          tables (.getTables meta nil nil nil (into-array [\&quot;uuueauu\&quot;]))]\n      tables)))&quot; &quot;(for [t (table-exists?)]\n  (.getString t))&quot; &quot;(count (table-exists?))&quot; &quot;(let [tables (table-exists?)]\n  (aget tables 0\n    ))&quot; &quot;(defn table-exists?\n  []\n  (with-open [db-con (sql/get-connection db)]\n    (let [meta (.getMetaData db-con)\n          tables (.getTables meta nil nil nil (into-array [\&quot;table\&quot;]))]\n      tables)))&quot; &quot;(let [tables (table-exists?)]\n  (.next tables\n    ))&quot; &quot;(let [tables (table-exists?)]\n  (while (.next tables)\n    (println (.getString tables \&quot;TABLE_NAME\&quot;))))&quot; &quot;(let [tables (table-exists?)\n      a (atom [])]\n  (while (.next tables)\n    (conj a (.getString tables \&quot;TABLE_NAME\&quot;)))\n  @a)&quot; &quot;(let [tables (table-exists?)\n      a (atom [])]\n  (while (.next tables)\n    (swap! a conj (.getString tables \&quot;TABLE_NAME\&quot;)))\n  @a)&quot; &quot;(get [\&quot;a\&quot;] \&quot;a\&quot;)&quot; &quot;(let [tables (table-exists?)\n      a (atom {[]})]\n  (while (.next tables)\n    (swap! a conj (.getString tables \&quot;TABLE_NAME\&quot;)))\n  @a)&quot; &quot;(let [tables (table-exists?)\n      a (atom {})]\n  (while (.next tables)\n    (swap! a conj (.getString tables \&quot;TABLE_NAME\&quot;)))\n  @a)&quot; &quot;(let [tables (table-exists?)\n      a (atom #{})]\n  (while (.next tables)\n    (swap! a conj (.getString tables \&quot;TABLE_NAME\&quot;)))\n  @a)&quot; &quot;(get #{\&quot;a\&quot;} \&quot;a\&quot;)&quot; &quot;(get #{\&quot;a\&quot;} \&quot;b\&quot;)&quot; &quot;(defn table-exists?\n  []\n  (with-open [db-con (sql/get-connection db)]\n    (let [meta (.getMetaData db-con)\n          tables (.getTables meta nil nil nil (into-array [\&quot;table\&quot;]))\n          a (atom #{})]\n      (while (.next tables)\n        (swap! a conj (.getString tables \&quot;TABLE_NAME\&quot;)))\n      (get @a \&quot;gues\&quot;))))&quot; &quot;(table-exists?)&quot; &quot;(defn table-exists?\n  []\n  (with-open [db-con (sql/get-connection db)]\n    (let [meta (.getMetaData db-con)\n          tables (.getTables meta nil nil nil (into-array [\&quot;table\&quot;]))\n          a (atom #{})]\n      (while (.next tables)\n        (swap! a conj (.getString tables \&quot;TABLE_NAME\&quot;)))\n      (get @a \&quot;guestbook\&quot;))))&quot;], :remote []}}</component>
</project>

